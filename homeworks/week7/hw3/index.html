<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>TodoList</title>
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <div class="wrap">
    <div class="list__title">Todo List</div>
    <div class="list__add">
      <input type="text" class="list__add_input" placeholder="Add Something To Do">
      <div class="list__add_button">ADD</div>
    </div>
    <div class="list__content">
      <div class="list__content_card">
        <div class="input_hint undisplay">Complete</div>
        <label class="txt" ><input class="input" type="checkbox">week7 hw1</label>
        <div class="del_btn">X
          <div class="del_btn_hint undisplay">Delete</div>
        </div>
      </div>
      <div class="list__content_card">
        <div class="input_hint undisplay">Complete</div> 
        <label class="txt"><input class="input" type="checkbox">read a book</label>
        <div class="del_btn">X
          <div class="del_btn_hint undisplay">Delete</div>
        </div>
      </div>
      <div class="list__content_card">
        <div class="input_hint undisplay">Complete</div>
        <label class="txt"><input class="input" type="checkbox">appointment with friends</label>
        <div class="del_btn">X
          <div class="del_btn_hint undisplay">Delete</div>
        </div>
      </div>
    </div>
  </div>
  <script>
    document.querySelector('.list__add > .list__add_button').addEventListener('click', function(e){
      let txtAdd = document.querySelector('.list__add_input').value
      let cardGroup = document.createElement('div')
      if (!(txtAdd)) return alert('請輸入內容')
      cardGroup.classList.add('list__content_card')
      cardGroup.innerHTML = `
<div class="input_hint undisplay">Complete</div>
  <label class="txt"><input class="input" type="checkbox">${escapeHtml(txtAdd)}</label>
  <div class="del_btn">X
    <div class="del_btn_hint undisplay">Delete</div>
  </div>
</div>`
      document.querySelector('.list__content').appendChild(cardGroup)
      document.querySelector('.list__add_input').value = ''
    })
    document.querySelector('.list__content').addEventListener('click', function(e){
      if (e.target.classList.contains('del_btn')) {
        e.target.parentNode.remove();
      }
      if (e.target.classList.contains('input')) {
        e.target.parentNode.classList.toggle('line_through');
        e.target.classList.toggle('input_active');
      }  
    })

    function escapeHtml(unsafe) {
      return unsafe
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
    }
  </script>
</body>
</html>